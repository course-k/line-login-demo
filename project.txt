最終的なゴール
lineログイン認証を成功させて、成功画面を出す


ログインボタン押下

リダイレクト情報生成用処理呼び出し

リダイレクト情報生成

リダイレクト



こういうURLを生成して、リダイレクトする
"https://access.line.me/oauth2/v2.1/authorize?"
+ "response_type=code"
+ "&client_id=" + channelId
+ "&redirect_uri=" + encodedCallbackUrl
+ "&state=" + state
+ "&scope=" + scope
+ "&nonce=" + nonce;

必須項目
response_type 固定 code
client_id チャネルID
redirect_uri コールバックURL、URLエンコードが必要
state クロスサイトリクエストフォージェリ防止用の固有な英数字の文字列、ログインセッションごとにランダムで生成する
scpoe ユーザーに付与を依頼する権限

任意項目
nonce リプレイアタックを防止するための文字列、レスポンスのIDトークンに含まれる


scope詳細
単体で指定できるのはprofile、openid
emailはopenidとセットで依頼できる
以下の5種のみ
profile
openid
profile%20openid
openid%20email
profile%20openid%20email
スコープによって取得できる情報が異なる

取得できるのは
プロフィール情報、IDトークン、IDトークン内のメールアドレス、IDトークン内の表示名、IDトークン内のプロフィール画像のURL
表示名と画像URLはprofileとopenidをセットで指定したときに取得できる

